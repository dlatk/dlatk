

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DLATK LDA Interface &mdash; DLATK 1.3.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=1f29e9d3"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/dlatk_logo_square.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#recommended-install">Recommended Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#full-install">Full Install</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#setup">Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../install.html#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#osx-with-brew">OSX (with brew)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#install-pip">Install (pip)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#install-anaconda">Install (Anaconda)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#install-github">Install (GitHub)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#install-other-dependencies">Install Other Dependencies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../install.html#load-nltk-corpus">Load NLTK corpus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#install-stanford-parser">Install Stanford Parser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#install-tweet-nlp-v0-3-ark-tweet-nlp-0-3">Install Tweet NLP v0.3 (ark-tweet-nlp-0.3)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#python-modules-optional">Python Modules (optional)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#install-the-ibm-wordcloud-jar-file-optional">Install the IBM Wordcloud jar file (optional)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#mallet-optional">Mallet (optional)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#full-list-of-dependencies">Full List of Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#python">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#other">Other</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#python-optional">Python (optional)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#other-optional">Other (optional)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#python-version-support">Python version support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#command-line-interface">Command Line Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#mysql-configuration">MySQL Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#sample-datasets">Sample Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#install-issues">Install Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/dlatk/dlatk/">Github Repo</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/drive/10WMCmnKzwywZR7s2et5xx9CcoWBNmhLY?usp=sharing">Getting started in Colab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#text-cleaning-and-transformations">Text Cleaning and Transformations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#feature-extraction">Feature Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#viewing-your-data-and-output">Viewing your data and output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#prediction">Prediction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#clustering">Clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#lda-with-mallet">LDA with Mallet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#data-engines">Data Engines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#other-topics">Other Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#video-tutorials">Video Tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../datasets.html">Packaged Datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../datasets.html#language-data">Language Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../datasets.html#blog-authorship-corpus">Blog Authorship Corpus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../datasets.html#lexica">Lexica</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../datasets.html#age-and-gender-lexica">Age and Gender Lexica</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datasets.html#perma-lexicon">PERMA Lexicon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datasets.html#spanish-perma-lexicon">Spanish PERMA Lexicon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datasets.html#other-lexica">Other Lexica</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../datasets.html#lda-topics">LDA Topics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../datasets.html#facebook-topics">2000 Facebook Topics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dlatkinterface_ordered.html">dlatkInterface Flags by type</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#preprocessing">Preprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#feature-extraction">Feature Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#feature-refinement">Feature Refinement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#language-insights">Language Insights</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#clustering">Clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#prediction">Prediction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dlatkinterface_ordered.html#regression">Regression</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dlatkinterface_ordered.html#classification">Classification</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#visualization">Visualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../papers.html">Papers Utilizing DLATK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../papers.html#dlatk-paper">DLATK Paper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../papers.html#peer-reviewed-publications">Peer Reviewed Publications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id1">2020</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id2">2019</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id3">2018</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id4">2017</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id11">2016</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id21">2015</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id26">2014</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id32">2013</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DLATK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">DLATK LDA Interface</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/tut_lda.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="dlatk-lda-interface">
<span id="tut-lda"></span><h1>DLATK LDA Interface<a class="headerlink" href="#dlatk-lda-interface" title="Link to this heading"></a></h1>
<p><strong>Note: These instructions introduce the new streamlined interface for LDA topic estimation. To use the old manual interface, see</strong> <a class="reference internal" href="tut_lda_full.html"><span class="doc">Mallet LDA Interface</span></a>.</p>
<p>For a conceptual overview of LDA, see <a class="reference external" href="http://blog.echen.me/2011/08/22/introduction-to-latent-dirichlet-allocation/">this intro</a></p>
<section id="step-0-setup">
<h2>Step 0: Setup<a class="headerlink" href="#step-0-setup" title="Link to this heading"></a></h2>
<p>Mallet:</p>
<ul class="simple">
<li><p>This tutorial uses <a class="reference external" href="http://mallet.cs.umass.edu/">Mallet</a>.</p></li>
<li><p>Install to your home directory using the following website: <a class="reference external" href="http://mallet.cs.umass.edu/download.php">http://mallet.cs.umass.edu/download.php</a></p></li>
<li><p>NOTE - if you plan to be running on large datasets (~15M FB messages or similar) you may have to adjust parameters in your mallet script file.  See more info in the &quot;Run LDA with Mallet&quot; step.</p></li>
</ul>
<p>PyMallet:</p>
<ul class="simple">
<li><p>Depending on your DLATK installation, you may also need to install pymallet with the following command: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">dlatk-pymallet</span></code></p></li>
</ul>
</section>
<section id="step-1-if-necessary-create-sample-tweet-table">
<h2>Step 1: (If necessary) Create sample tweet table<a class="headerlink" href="#step-1-if-necessary-create-sample-tweet-table" title="Link to this heading"></a></h2>
<p>If necessary, create a message table to run LDA on:</p>
<div class="highlight-mysql notranslate"><div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">dla_tutorial</span><span class="p">;</span>
<span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">msgs_lda</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="n">msgs</span><span class="p">;</span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">msgs_lda</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">msgs</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="nf">rand</span><span class="p">()</span><span class="o">&lt;</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">6</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="step-2-generate-a-feature-table">
<h2>Step 2: Generate a feature table<a class="headerlink" href="#step-2-generate-a-feature-table" title="Link to this heading"></a></h2>
<p>This is a standard unigram feature table generation command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dlatkInterface.py<span class="w"> </span>-d<span class="w"> </span>dla_tutorial<span class="w"> </span>-t<span class="w"> </span>msgs_lda<span class="w"> </span>-c<span class="w"> </span>message_id<span class="w"> </span>--add_ngrams<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</section>
<section id="step-3-estimate-lda-topics">
<h2>Step 3: Estimate LDA topics<a class="headerlink" href="#step-3-estimate-lda-topics" title="Link to this heading"></a></h2>
<p>A minimal command for estimating LDA topics is shown below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dlatkInterface.py<span class="w"> </span>-d<span class="w"> </span>dla_tutorial<span class="w"> </span>-t<span class="w"> </span>msgs_lda<span class="w"> </span>-c<span class="w"> </span>message_id<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-f<span class="w"> </span><span class="s1">&#39;feat$1gram$msgs_lda$message_id$16to16&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--estimate_lda_topics<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--lda_lexicon_name<span class="w"> </span>my_lda_lexicon
</pre></div>
</div>
<p>However, it is important to realize that the command above will estimate LDA topics using PyMallet, which is in general <em>much</em> slower than Mallet. To use Mallet for topic estimation, you can use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dlatkInterface.py<span class="w"> </span>-d<span class="w"> </span>dla_tutorial<span class="w"> </span>-t<span class="w"> </span>msgs_lda<span class="w"> </span>-c<span class="w"> </span>message_id<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-f<span class="w"> </span><span class="s1">&#39;feat$1gram$msgs_lda$message_id$16to16&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--estimate_lda_topics<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--lda_lexicon_name<span class="w"> </span>my_lda_lexicon<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--mallet_path<span class="w"> </span>/path/to/mallet/bin/mallet
</pre></div>
</div>
<p>Be sure to replace <code class="docutils literal notranslate"><span class="pre">/path/to/mallet/bin/mallet</span></code> with the correct path to which you installed Mallet in Step 0.</p>
<p>It is good practice to refrain from storing the topics as a lexicon until after you have reviewed them. While the interim LDA estimation files are typically stored in your <code class="docutils literal notranslate"><span class="pre">/tmp</span></code> directory, you can specify a different directory to allow you to more easily review the topics you have estimated. The following command will store these files in the <code class="docutils literal notranslate"><span class="pre">lda_files</span></code> directory and prevent creating a topic lexicon:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dlatkInterface.py<span class="w"> </span>-d<span class="w"> </span>dla_tutorial<span class="w"> </span>-t<span class="w"> </span>msgs_lda<span class="w"> </span>-c<span class="w"> </span>message_id<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-f<span class="w"> </span><span class="s1">&#39;feat$1gram$msgs_lda$message_id$16to16&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--estimate_lda_topics<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--save_lda_files<span class="w"> </span>lda_files
<span class="w">    </span>--no_lda_lexicon<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--mallet_path<span class="w"> </span>/path/to/mallet/bin
</pre></div>
</div>
<p>You can now review the <code class="docutils literal notranslate"><span class="pre">.keys</span></code> file in the <code class="docutils literal notranslate"><span class="pre">lda_files</span></code> directory to view the estimated topics and decide whether you should change any parameters (e.g., <a class="reference internal" href="../fwinterface/fwflag_num_stopwords.html"><span class="doc">--num_stopwords</span></a> or <a class="reference internal" href="../fwinterface/fwflag_lda_alpha.html"><span class="doc">--lda_alpha</span></a>).</p>
<p>An important difference between this new interface and the old one is that stop words are no longer derived from a static Mallet stoplist. Instead, DLATK will determine the most common terms in your feature table and remove them (by default, it sets the top 50 most frequent terms as stop words, but this can be controlled with <a class="reference internal" href="../fwinterface/fwflag_num_stopwords.html"><span class="doc">--num_stopwords</span></a>). To disable stopping entirely, use <a class="reference internal" href="../fwinterface/fwflag_no_lda_stopping.html"><span class="doc">--no_lda_stopping</span></a>.</p>
<p>There are several options you may wish to use with <a class="reference internal" href="../fwinterface/fwflag_estimate_lda_topics.html"><span class="doc">--estimate_lda_topics</span></a>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../fwinterface/fwflag_mallet_path.html"><span class="doc">--mallet_path</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_save_lda_files.html"><span class="doc">--save_lda_files</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_lda_lexicon_name.html"><span class="doc">--lda_lexicon_name</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_no_lda_lexicon.html"><span class="doc">--no_lda_lexicon</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_num_topics.html"><span class="doc">--num_topics</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_num_stopwords.html"><span class="doc">--num_stopwords</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_no_lda_stopping.html"><span class="doc">--no_lda_stopping</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_lda_alpha.html"><span class="doc">--lda_alpha</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_lda_beta.html"><span class="doc">--lda_beta</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_lda_iterations.html"><span class="doc">--lda_iterations</span></a></p></li>
</ul>
</section>
<section id="step-4-extract-features-from-lexicon">
<h2>Step 4: Extract features from lexicon<a class="headerlink" href="#step-4-extract-features-from-lexicon" title="Link to this heading"></a></h2>
<p>You’re now ready to start using the topic distribution lexicon</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dlatkInterface.py<span class="w"> </span>-d<span class="w"> </span>DATABASE<span class="w"> </span>-t<span class="w"> </span>MESSAGE_TABLE<span class="w"> </span>-c<span class="w"> </span>GROUP_ID<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--add_lex_table<span class="w"> </span>-l<span class="w"> </span>my_lda_lexicon_cp<span class="w"> </span>--weighted_lexicon
</pre></div>
</div>
<p>Always extract features using the <code class="docutils literal notranslate"><span class="pre">_cp</span></code> lexicon. The <code class="docutils literal notranslate"><span class="pre">_freq_t50ll</span></code> lexicon is only used when generating topic_tagclouds: <a class="reference internal" href="../fwinterface/fwflag_topic_tagcloud.html"><span class="doc">--topic_tagcloud</span></a> <a class="reference internal" href="../fwinterface/fwflag_topic_lexicon.html"><span class="doc">--topic_lexicon</span></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, H. Andrew Schwartz and Salvatore Giorgi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>