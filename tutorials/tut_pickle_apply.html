

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Applying A Pickle Model &mdash; DLATK 1.3.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=1f29e9d3"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/dlatk_logo_square.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#recommended-install">Recommended Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#full-install">Full Install</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#setup">Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../install.html#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#osx-with-brew">OSX (with brew)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#install-pip">Install (pip)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#install-anaconda">Install (Anaconda)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#install-github">Install (GitHub)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#install-other-dependencies">Install Other Dependencies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../install.html#load-nltk-corpus">Load NLTK corpus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#install-stanford-parser">Install Stanford Parser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#install-tweet-nlp-v0-3-ark-tweet-nlp-0-3">Install Tweet NLP v0.3 (ark-tweet-nlp-0.3)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#python-modules-optional">Python Modules (optional)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#install-the-ibm-wordcloud-jar-file-optional">Install the IBM Wordcloud jar file (optional)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../install.html#mallet-optional">Mallet (optional)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#full-list-of-dependencies">Full List of Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#python">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#other">Other</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#python-optional">Python (optional)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#other-optional">Other (optional)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#python-version-support">Python version support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#command-line-interface">Command Line Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#mysql-configuration">MySQL Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#sample-datasets">Sample Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#install-issues">Install Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/dlatk/dlatk/">Github Repo</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/drive/10WMCmnKzwywZR7s2et5xx9CcoWBNmhLY?usp=sharing">Getting started in Colab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#text-cleaning-and-transformations">Text Cleaning and Transformations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#feature-extraction">Feature Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#viewing-your-data-and-output">Viewing your data and output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#prediction">Prediction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#clustering">Clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#lda-with-mallet">LDA with Mallet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#data-engines">Data Engines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#other-topics">Other Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#video-tutorials">Video Tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../datasets.html">Packaged Datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../datasets.html#language-data">Language Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../datasets.html#blog-authorship-corpus">Blog Authorship Corpus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../datasets.html#lexica">Lexica</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../datasets.html#age-and-gender-lexica">Age and Gender Lexica</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datasets.html#perma-lexicon">PERMA Lexicon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datasets.html#spanish-perma-lexicon">Spanish PERMA Lexicon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datasets.html#other-lexica">Other Lexica</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../datasets.html#lda-topics">LDA Topics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../datasets.html#facebook-topics">2000 Facebook Topics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dlatkinterface_ordered.html">dlatkInterface Flags by type</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#preprocessing">Preprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#feature-extraction">Feature Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#feature-refinement">Feature Refinement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#language-insights">Language Insights</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#clustering">Clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#prediction">Prediction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dlatkinterface_ordered.html#regression">Regression</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dlatkinterface_ordered.html#classification">Classification</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dlatkinterface_ordered.html#visualization">Visualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../papers.html">Papers Utilizing DLATK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../papers.html#dlatk-paper">DLATK Paper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../papers.html#peer-reviewed-publications">Peer Reviewed Publications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id1">2020</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id2">2019</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id3">2018</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id4">2017</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id11">2016</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id21">2015</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id26">2014</a></li>
<li class="toctree-l3"><a class="reference internal" href="../papers.html#id32">2013</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DLATK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Applying A Pickle Model</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/tut_pickle_apply.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="applying-a-pickle-model">
<span id="tut-pickle-apply"></span><h1>Applying A Pickle Model<a class="headerlink" href="#applying-a-pickle-model" title="Link to this heading"></a></h1>
<p>In this tutorial you will learn how to apply a pickled regression model to a new data set. It assumes you have completed the following tutorials:</p>
<ul class="simple">
<li><p><a class="reference internal" href="tut_dla.html"><span class="doc">Differential Language Analysis (DLA) Tutorial</span></a></p></li>
<li><p><a class="reference internal" href="tut_feat_tables.html"><span class="doc">Understanding Feature Table Names</span></a></p></li>
<li><p><a class="reference internal" href="tut_pred.html"><span class="doc">Intro Prediction / Classification / Predictive Lexica</span></a></p></li>
</ul>
<p>We use the model built in:</p>
<ul class="simple">
<li><p><a class="reference internal" href="tut_pickle_build.html"><span class="doc">Building A Pickle Model</span></a></p></li>
</ul>
<section id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Link to this heading"></a></h2>
<p>To use a pickle model we have two separate commands for both regression and classification tasks. The</p>
<p>Regression:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../fwinterface/fwflag_predict_regression_to_feats.html"><span class="doc">--predict_regression_to_feats</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_predict_regression_to_outcome_table.html"><span class="doc">--predict_regression_to_outcome_table</span></a></p></li>
</ul>
<p>Classification</p>
<ul class="simple">
<li><p><a class="reference internal" href="../fwinterface/fwflag_predict_classifiers_to_feats.html"><span class="doc">--predict_classifiers_to_feats</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_predict_probabilities_to_feats.html"><span class="doc">--predict_classifiers_to_feats</span></a></p></li>
<li><p><span class="xref std std-doc">../fwinterface/fwflag_predict_classifiers_to_outcome_table</span></p></li>
</ul>
</section>
<section id="predict-regression-to-feature-table">
<h2>Predict Regression To Feature Table<a class="headerlink" href="#predict-regression-to-feature-table" title="Link to this heading"></a></h2>
<p>This command will produce a &quot;feature table&quot; type table in MySQL where each row contains a group id, feature, value and group norm. This type of table is useful if you want to use these prediction results as features in a separate prediction task.</p>
<section id="sample-command">
<h3>Sample Command<a class="headerlink" href="#sample-command" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./dlatkInterface.py<span class="w"> </span>-d<span class="w"> </span>dla_tutorial<span class="w"> </span>-t<span class="w"> </span>msgs<span class="w"> </span>-c<span class="w"> </span>user_id<span class="w"> </span>--group_freq_thresh<span class="w"> </span><span class="m">500</span><span class="w"> </span>-f<span class="w"> </span><span class="s1">&#39;feat$cat_met_a30_2000_cp_w$msgs$user_id$16to16&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="s1">&#39;feat$1to3gram$msgs$user_id$16to16&#39;</span><span class="w"> </span><span class="s1">&#39;feat$1to3gram$msgs$user_id$16to1&#39;</span><span class="w"> </span>--outcome_table<span class="w"> </span>ageDummy<span class="w"> </span><span class="se">\</span>
--outcomes<span class="w"> </span>age<span class="w"> </span>--predict_regression_to_feat<span class="w"> </span>lbp_age<span class="w">  </span>--load<span class="w"> </span>--picklefile<span class="w"> </span><span class="se">\</span>
~/age.2000fbtopics.1to3grams.16to16.16to1.ridge1000.magic_sauce.gft500.pickle
</pre></div>
</div>
</section>
<section id="required-switches">
<h3>Required Switches<a class="headerlink" href="#required-switches" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../fwinterface/fwflag_d.html"><span class="doc">-d</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_t.html"><span class="doc">-t</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_c.html"><span class="doc">-g</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_f.html"><span class="doc">-f</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_group_freq_thresh.html"><span class="doc">--group_freq_thresh</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_outcome_table.html"><span class="doc">--outcome_table</span></a>:</p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_outcomes.html"><span class="doc">--outcomes</span></a>:</p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_predict_regression_to_feats.html"><span class="doc">--predict_regression_to_feats</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_load_model.html"><span class="doc">--load_model</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_picklefile.html"><span class="doc">--picklefile</span></a></p></li>
</ul>
</section>
<section id="feature-tables">
<h3>Feature Tables<a class="headerlink" href="#feature-tables" title="Link to this heading"></a></h3>
<p>The feature tables listed after the -f flag need to be in the same order as when the pickle file was created. This is usually specified in the name of the pickle. In this example the pickle name is age.2000fbtopics.1to3grams.16to16.16to1.ridge1000.magic_sauce.gft500.pickle which tells us that we need &quot;2000fbtopics&quot; (assumed to be the 2000 Facebook topics) and 1to3grams. We also see &quot;16to16.16to1&quot; in the name which tells us we need a 16to16 and 16to1 (boolean encoded) table.</p>
<p>The final tables should be:</p>
<ul class="simple">
<li><p>2000 Facebook topics: feat$cat_met_a30_2000_cp_w$msgs$user_id$16to16</p></li>
<li><p>1to3grams: feat$1to3gram$msgs$user_id$16to16$0_005</p></li>
<li><p>Boolean 1to3grams: feat$1to3gram$msgs$user_id$16to1$0_005</p></li>
</ul>
<p>Again, these tables need to be listed in this order</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-f<span class="w"> </span><span class="s1">&#39;feat$cat_met_a30_2000_cp_w$msgs$user_id$16to16&#39;</span><span class="w"> </span><span class="s1">&#39;feat$1to3gram$msgs$user_id$16to16$0_005&#39;&#39; feat$1to3gram$msgs$user_id$16to1$0_005&#39;</span>
</pre></div>
</div>
</section>
<section id="outcome-table">
<h3>Outcome Table<a class="headerlink" href="#outcome-table" title="Link to this heading"></a></h3>
<p>You must create a dummy outcome table as described in predict_regression_to_feats. The outcome table must have</p>
<ul class="simple">
<li><p>row for every outcome group_id (in this example, every message_id)</p></li>
<li><p>a non-null value for every outcome listed after --outcomes (in this example, ope con ext agr neu)</p></li>
</ul>
<p>You can do this in MySQL with:</p>
<div class="highlight-mysql notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">ageDummy</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">user_id</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">msgs</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">uidx</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">ageDummy</span><span class="w"> </span><span class="p">(</span><span class="n">user_id</span><span class="p">);</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">ageDummy</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="o">+--------------------+------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">message_id</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">age</span><span class="w">  </span><span class="o">|</span>
<span class="o">+--------------------+------+</span>
<span class="o">|</span><span class="w"> </span><span class="mi">626654933077618688</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">626654998773014528</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">626655093023211520</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">626655195976568832</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">626655248321482752</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span>
<span class="o">+--------------------+------+</span>
</pre></div>
</div>
</section>
<section id="output-feature-table">
<h3>Output Feature table<a class="headerlink" href="#output-feature-table" title="Link to this heading"></a></h3>
<p>The predicted values will be written to a feature table with the following name format: feat$p_modelType_ARGUMENT$message_table$group_id. The output feature table is as follows:</p>
<div class="highlight-mysql notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">feat$p_ridg_lbp_age$msgs$user_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">group_id</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="o">+------+----------+------+---------------+---------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">group_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">feat</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">value</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">group_norm</span><span class="w">    </span><span class="o">|</span>
<span class="o">+------+----------+------+---------------+---------------+</span>
<span class="o">|</span><span class="w">  </span><span class="mi">793</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">28451</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">age</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mf">36.5453007746</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">36.5453007746</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="mi">729</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">174357</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">age</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mf">23.2885389879</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">23.2885389879</span><span class="w"> </span><span class="o">|</span>
<span class="o">+------+----------+------+---------------+---------------+</span>
</pre></div>
</div>
</section>
</section>
<section id="predict-regression-to-output-table">
<h2>Predict Regression To Output Table<a class="headerlink" href="#predict-regression-to-output-table" title="Link to this heading"></a></h2>
<p>This command will produce an &quot;outcome table&quot; type table in MySQL where each row contains a group id and values for each outcome in the pickle model. This type of table is useful if you want to use these prediction results as outcomes in a separate DLA type task, for example using personality as controls when running DLA over some other outcome.</p>
<section id="id1">
<h3>Sample Command<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./dlatkInterface.py<span class="w"> </span>-d<span class="w"> </span>dla_tutorial<span class="w"> </span>-t<span class="w"> </span>msgs<span class="w"> </span>-c<span class="w"> </span>user_id<span class="w"> </span>--group_freq_thresh<span class="w"> </span><span class="m">500</span><span class="w"> </span>-f<span class="w"> </span><span class="s1">&#39;feat$cat_met_a30_2000_cp_w$msgs$user_id$16to16&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="s1">&#39;feat$1to3gram$msgs$user_id$16to16&#39;</span><span class="w"> </span><span class="s1">&#39;feat$1to3gram$msgs$user_id$16to1&#39;</span><span class="w">  </span>--predict_regression_to_outcome_table<span class="w"> </span>lbp_age<span class="w"> </span>--load<span class="w"> </span>--picklefile<span class="w"> </span><span class="se">\</span>
~/age.2000fbtopics.1to3grams.16to16.16to1.ridge1000.magic_sauce.gft500.pickle
</pre></div>
</div>
</section>
<section id="id2">
<h3>Required Switches<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../fwinterface/fwflag_d.html"><span class="doc">-d</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_t.html"><span class="doc">-t</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_c.html"><span class="doc">-g</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_f.html"><span class="doc">-f</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_group_freq_thresh.html"><span class="doc">--group_freq_thresh</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_predict_regression_to_outcome_table.html"><span class="doc">--predict_regression_to_outcome_table</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_load_model.html"><span class="doc">--load_model</span></a></p></li>
<li><p><a class="reference internal" href="../fwinterface/fwflag_picklefile.html"><span class="doc">--picklefile</span></a></p></li>
</ul>
</section>
<section id="feature-table">
<h3>Feature Table<a class="headerlink" href="#feature-table" title="Link to this heading"></a></h3>
<p>The feature tables listed after the -f flag need to be in the same order as when the pickle file was created. This is usually specified in the name of the pickle. In this example the pickle name is ocean.topics_grams16and1.pickle which tells us that we need topics (assumed to be the 2000 Facebook topics) and grams (assumed to be 1-3 grams). We also see 16and1 in the name which tells us we need a 16to16 and 16to1 (boolean encoded) table.</p>
<p>The final tables should be:</p>
<ul class="simple">
<li><p>2000 Facebook topics: feat$cat_met_a30_2000_cp_w$msgs$user_id$16to16</p></li>
<li><p>1to3grams: feat$1to3gram$msgs$user_id$16to16</p></li>
<li><p>Boolean 1to3grams: feat$1to3gram$msgs$user_id$16to1</p></li>
</ul>
<p>Again, these tables need to be listed in this order</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-f<span class="w"> </span><span class="s1">&#39;feat$cat_met_a30_2000_cp_w$msgs$user_id$16to16&#39;</span><span class="w"> </span><span class="s1">&#39;feat$1to3gram$msgs$user_id$16to16&#39;&#39; feat$1to3gram$msgs$user_id$16to1&#39;</span>
</pre></div>
</div>
</section>
<section id="output-table">
<h3>Output table<a class="headerlink" href="#output-table" title="Link to this heading"></a></h3>
<p>The table created will look like: p_modelType$ARGUMENT If you used ridge with the argument in the sample command, for instance, it will look like p_ridg$lbp_age. Here &quot;lbp&quot; stands for &quot;language based predictions&quot;.</p>
<p>The output table is in dense form and looks like:</p>
<div class="highlight-mysql notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p_ridg$lbp_age</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="o">+---------+---------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">user_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">age</span><span class="w">           </span><span class="o">|</span>
<span class="o">+---------+---------------+</span>
<span class="o">|</span><span class="w">   </span><span class="mi">28451</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">36.5453007746</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="mi">174357</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">23.2885389879</span><span class="w"> </span><span class="o">|</span>
<span class="o">+---------+---------------+</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, H. Andrew Schwartz and Salvatore Giorgi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>